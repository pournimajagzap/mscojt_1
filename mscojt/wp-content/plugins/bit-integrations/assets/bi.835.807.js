var _=Object.defineProperty;var F=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var g=(e,i,l)=>i in e?_(e,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[i]=l,r=(e,i)=>{for(var l in i||(i={}))k.call(i,l)&&g(e,l,i[l]);if(F)for(var l of F(i))I.call(i,l)&&g(e,l,i[l]);return e};import{h as L,j as s,L as T}from"./main-390.js";import{l as S,_ as n,m as $,n as R,L as q}from"./bi.126.82.js";import{h as y,a as w,d as V}from"./bi.649.799.js";import{T as A}from"./bi.286.689.js";import{g as M,a as P,b as u}from"./bi.261.806.js";function z({i:e,field:i,formFields:l,mailercloudConf:t,setMailercloudConf:d}){var c,m,b,N;const j=L(S),{isPro:x}=j;if(((c=t==null?void 0:t.field_map)==null?void 0:c.length)===1&&i.mailercloudFormField===""){const a=r({},t),v=M(a);a.field_map=v,d(a)}const h=((m=t==null?void 0:t.default)==null?void 0:m.fields.filter(a=>a.required===!0))||[],p=((b=t==null?void 0:t.default)==null?void 0:b.fields.filter(a=>a.required===!1))||[];return s.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:s.jsxs("div",{className:"pos-rel flx",children:[s.jsxs("div",{className:"flx integ-fld-wrp",children:[s.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",onChange:a=>{y(a,e,t,d)},value:i.formField||"",children:[s.jsx("option",{value:"",children:n("Select Field")}),s.jsx("optgroup",{label:"Form Fields",children:l==null?void 0:l.map(a=>s.jsx("option",{value:a.name,children:a.label},`ff-rm-${a.name}`))}),s.jsx("option",{value:"custom",children:n("Custom...")}),s.jsx("optgroup",{label:`General Smart Codes ${x?"":"(PRO)"}`,children:x&&((N=$)==null?void 0:N.map(a=>s.jsx("option",{value:a.name,children:a.label},`ff-rm-${a.name}`)))})]}),i.formField==="custom"&&s.jsx(A,{onChange:a=>R(a,e,t,d),label:n("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:i.customValue,placeholder:n("Custom Value","bit-integrations"),formFields:l}),s.jsxs("select",{className:"btcd-paper-inp",disabled:e<h.length,name:"mailercloudFormField",onChange:a=>{y(a,e,t,d)},value:e<h.length?h[e].key||"":i.mailercloudFormField||"",children:[s.jsx("option",{value:"",children:n("Select Field")}),e<h.length?s.jsx("option",{value:h[e].key,children:h[e].label},h[e].key):p.map(({key:a,label:v})=>s.jsx("option",{value:a,children:v},a))]})]}),s.jsx("button",{onClick:()=>w(e,t,d),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),s.jsx("button",{onClick:()=>V(e,t,d),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:s.jsx("span",{className:"btcd-icn icn-trash-2"})})]})})}function H({mailercloudConf:e,setMailercloudConf:i,formFields:l,loading:t,setLoading:d}){var h;const j=["active","bounce","abuse","unsubscribe","suppressed","spam complaints"],x=p=>{const c=r({},e),{name:m,value:b}=p.target;switch(b!==""?c[m]=b:delete c[m],m){case"listId":c.field_map=[{formField:"",mailercloudFormField:""}],c.contactType="";break}u(c,i,t,d),i(r({},c))};return s.jsxs("div",{className:"mt-2",children:[!t.page&&s.jsxs("div",{className:"flx mt-2",children:[s.jsx("b",{className:"wdt-200 d-in-b ",children:n("List:")}),s.jsxs("select",{onChange:x,name:"listId",value:e==null?void 0:e.listId,className:"btcd-paper-inp w-5 mx-0",children:[s.jsx("option",{value:"",children:n("Select List")}),((h=e==null?void 0:e.default)==null?void 0:h.lists)&&e.default.lists.map(p=>s.jsx("option",{value:p.id,children:p.name},p.id))]}),s.jsx("button",{onClick:()=>P(e,i,t,d),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh list"'},type:"button",disabled:t.list,children:"↻"}),t.list&&s.jsx(q,{size:"20",clr:"#022217",className:"ml-2"})]}),e.listId&&s.jsxs("div",{className:"flx mt-2",children:[s.jsx("b",{className:"wdt-200 d-in-b ",children:n("Contact type:")}),s.jsxs("select",{onChange:x,name:"contactType",value:e==null?void 0:e.contactType,className:"btcd-paper-inp w-5 mx-0",children:[s.jsx("option",{value:"",children:n("Select Type")}),j.map(p=>s.jsx("option",{value:p,children:p.toUpperCase()},p))]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("b",{className:"wdt-100",children:n("Map Fields","bit-integrations")}),s.jsx("button",{onClick:()=>u(e,i,t,d),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${n("Refresh Mailer Cloud Field","bit-integrations")}'`},type:"button",disabled:t.field,children:"↻"})]}),(t.page||t.field)&&s.jsx(T,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),(e==null?void 0:e.listId)&&e.default.fields&&s.jsxs("div",{className:"mt-5",children:[s.jsx("b",{className:"wdt-100",children:n("Field Map")}),s.jsx("div",{className:"btcd-hr mt-2 mb-4"}),s.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[s.jsx("div",{className:"txt-dp",children:s.jsx("b",{children:n("Form Fields")})}),s.jsx("div",{className:"txt-dp",children:s.jsx("b",{children:n("Mailercloud Fields")})})]}),e==null?void 0:e.field_map.map((p,c)=>s.jsx(z,{i:c,field:p,formFields:l,mailercloudConf:e,setMailercloudConf:i},`ko-m-${c+8}`)),s.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:s.jsx("button",{onClick:()=>w(e.field_map.length,e,i),className:"icn-btn sh-sm",type:"button",children:"+"})})]})]})}export{H as M};
