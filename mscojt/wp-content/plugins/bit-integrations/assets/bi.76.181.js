var k=Object.defineProperty;var w=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var C=(i,e,t)=>e in i?k(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,g=(i,e)=>{for(var t in e||(e={}))D.call(e,t)&&C(i,t,e[t]);if(w)for(var t of w(e))E.call(e,t)&&C(i,t,e[t]);return i};import{u as P,k as R,d as b,r as h,h as $,j as n}from"./main-390.js";import{h as L,$ as M,i as q,e as A,_ as l,j as z,I as B,s as G}from"./bi.126.82.js";import{h as H,c as J,a as K}from"./bi.269.852.js";import{F as O}from"./bi.437.853.js";import"./bi.286.689.js";import"./bi.414.690.js";function T({allIntegURL:i}){const e=P(),{id:t}=R(),[a,d]=b(L),[c,v]=b(M),[p,m]=h.useState(!1),[I,o]=h.useState({show:!1}),[u,S]=h.useState(0),x=$(q),_=(s,f,y,N)=>{const r=g({},y),{name:j}=s.target;f===0?s.target.value!==""?r[j]=s.target.value:delete r[j]:(r.relatedlists||(r.relatedlists=[]),s.target.value!==""?r.relatedlists[f-1][s.target.name]=s.target.value:delete r.relatedlists[f-1][s.target.name]),N(g({},r))},F=()=>{if(!J(a)){o({show:!0,msg:l("Please map mandatory fields","bit-integrations")});return}if(!K(a)){["Deal","Contact"].includes(a.moduleData.module)&&o({show:!0,msg:l("Please select a account or a contact","bit-integrations")}),a.moduleData.module==="Contacts"&&o({show:!0,msg:l("Please select a account","bit-integrations")});return}G({flow:c,setFlow:v,allIntegURL:i,conf:a,navigate:e,id:t,edit:1,setIsLoading:m,setSnackbar:o})};return n.jsxs("div",{style:{width:900},children:[n.jsx(A,{snack:I,setSnackbar:o}),n.jsxs("div",{className:"flx mt-3",children:[n.jsx("b",{className:"wdt-200 ",children:l("Integration Name:","bit-integrations")}),n.jsx("input",{className:"btcd-paper-inp w-5",onChange:s=>_(s,u,a,d),name:"name",value:a.name,type:"text",placeholder:l("Integration Name...","bit-integrations")})]}),n.jsx("br",{}),n.jsx(z,{entity:c.triggered_entity,setSnackbar:o}),n.jsx(O,{tab:u,settab:S,formID:c.triggered_entity_id,formFields:x,handleInput:s=>H(s,u,a,d,m,o),freshSalesConf:a,setFreshSalesConf:d,isLoading:p,setIsLoading:m,setSnackbar:o}),n.jsx(B,{edit:!0,saveConfig:F,disabled:a.moduleData.module===""||a.field_map.length<1,isLoading:p,dataConf:a,setDataConf:d,formFields:x}),n.jsx("br",{})]})}export{T as default};
