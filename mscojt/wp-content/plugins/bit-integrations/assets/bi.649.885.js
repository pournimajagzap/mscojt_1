var M=Object.defineProperty;var v=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var y=(l,t,a)=>t in l?M(l,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[t]=a,p=(l,t)=>{for(var a in t||(t={}))A.call(t,a)&&y(l,a,t[a]);if(v)for(var a of v(t))R.call(t,a)&&y(l,a,t[a]);return l};import{r as $,j as e,L as w,h as I}from"./main-390.js";import{o as V,_ as i,f as q,p as _,J as T,l as P,m as E}from"./bi.126.82.js";import{g as h,r as F}from"./bi.683.884.js";const k=(l,t,a)=>{const c=p({},t);c.field_map.splice(l,0,{}),a(p({},c))},O=(l,t,a)=>{const c=p({},t);c.field_map.length>1&&c.field_map.splice(l,1),a(p({},c))},u=(l,t,a,c)=>{const s=p({},a);s.field_map[t][l.target.name]=l.target.value,l.target.value==="custom"&&(s.field_map[t].customValue=""),c(p({},s))},S=(l,t,a,c,s)=>{const d=p({},a);d.field_map[t][s]=l.target.value,c(p({},d))};function B({suiteDashConf:l,setSuiteDashConf:t,loading:a,setLoading:c}){var j,r;const[s,d]=$.useState({show:!1,action:()=>{}}),m=(n,o)=>{var N;const b=p({},l);o==="company"&&((N=n.target)!=null&&N.checked?(b.companies===void 0&&(b.companies=h(l,t,c)),b.actions.company=!0):(d({show:!1}),delete b.actions.company)),d({show:o}),t(p({},b))},x=()=>{d({show:!1})},g=(n,o)=>{t(b=>(b[o]=n,b))};return e.jsxs("div",{className:"pos-rel d-flx flx-wrp",children:[l.actionName==="contact"&&e.jsx(V,{checked:((j=l==null?void 0:l.selectedCompany)==null?void 0:j.length)||!1,onChange:n=>m(n,"company"),className:"wdt-200 mt-4 mr-2",value:"company",title:i("Add Company","bit - integrations"),subTitle:i("Add Company")}),e.jsxs(q,{className:"custom-conf-mdl",mainMdlCls:"o-v",btnClass:"blue",btnTxt:i("Ok","bit-integrations"),show:s.show==="company",close:x,action:x,title:i("company","bit-integrations"),children:[e.jsx("div",{className:"btcd-hr mt-2 mb-2"}),e.jsx("div",{className:"mt-2",children:i("Select Company","bit-integrations")}),a.companies?e.jsx(w,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:45,transform:"scale(0.5)"}}):e.jsxs("div",{className:"flx flx-between mt-2",children:[e.jsx(_,{options:(r=l==null?void 0:l.companies)==null?void 0:r.map(n=>({label:n,value:n})),className:"msl-wrp-options",defaultValue:l.selectedCompany,onChange:n=>g(n,"selectedCompany"),singleSelect:!0}),e.jsx("button",{onClick:()=>h(l,t,c),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`${i("Refresh Companies","bit-integrations")}'`},type:"button",children:"↻"})]})]})]})}function G({field:l,index:t,conf:a,setConf:c,fieldValue:s,fieldLabel:d,className:m}){return e.jsx(T,{onChange:x=>S(x,t,a,c,s),label:i(d,"bit-integrations"),className:m,type:"text",value:l[s],placeholder:i(d,"bit-integrations")})}function H({i:l,formFields:t,field:a,suiteDashConf:c,setSuiteDashConf:s}){var r;const d=["owner","pipeline","stage","primaryContact","type","tags","lostReason","source","status","priority","currency","isActive","primaryCompany"],m=(c==null?void 0:c.suiteDashFields)&&(c==null?void 0:c.suiteDashFields.filter(n=>n.required===!0&&!d.includes(n.key)))||[],x=(c==null?void 0:c.suiteDashFields)&&(c==null?void 0:c.suiteDashFields.filter(n=>n.required===!1&&!d.includes(n.key)))||[],g=I(P),{isPro:j}=g;return e.jsx("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:e.jsxs("div",{className:"pos-rel flx",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:a.formField||"",onChange:n=>u(n,l,c,s),children:[e.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:t==null?void 0:t.map(n=>e.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`))}),e.jsx("option",{value:"custom",children:i("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${j?"":"(PRO)"}`,children:j&&((r=E)==null?void 0:r.map(n=>e.jsx("option",{value:n.name,children:n.label},`ff-rm-${n.name}`)))})]}),a.formField==="custom"&&e.jsx(G,{field:a,index:l,conf:c,setConf:s,fieldValue:"customValue",fieldLabel:"Custom Value",className:"mr-2"}),e.jsxs("select",{className:"btcd-paper-inp",disabled:l<m.length,name:"suiteDashFormField",value:l<m.length?m[l].key||"":a.suiteDashFormField||"",onChange:n=>u(n,l,c,s),children:[e.jsx("option",{value:"",children:i("Select Field","bit-integrations")}),l<m.length?e.jsx("option",{value:m[l].key,children:m[l].label},m[l].key):x.map(({key:n,label:o})=>e.jsx("option",{value:n,children:o},n))]})]}),l>=m.length&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>k(l,c,s),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>O(l,c,s),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx("span",{className:"btcd-icn icn-trash-2"})})]})]})})}function Q({formFields:l,suiteDashConf:t,setSuiteDashConf:a,loading:c,setLoading:s,isLoading:d,setIsLoading:m,setSnackbar:x}){const g=r=>{const n=p({},t),{name:o}=r.target;r.target.value!==""?(n[o]=r.target.value,F(n,a,m,x)):(delete n[o],delete n.actionId),a(n)},j=(r,n)=>{a(o=>(o[n]=r,o))};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Action:","bit-integrations")}),e.jsxs("select",{onChange:g,name:"actionName",value:t.actionName,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:i("Select an action","bit-integrations")}),e.jsx("option",{value:"contact","data-action_name":"contact",children:i("Create Contact","bit-integrations")})]}),d&&e.jsx(w,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),t.actionName==="contact"&&!d&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"flx",children:[e.jsx("b",{className:"wdt-200 d-in-b",children:i("Select Role:","bit-integrations")}),e.jsx(_,{options:["Lead","Prospect","Client"].map(r=>({label:r,value:r})),className:"msl-wrp-options dropdown-custom-width",defaultValue:t==null?void 0:t.selectedRole,onChange:r=>j(r,"selectedRole"),singleSelect:!0})]})]}),t.actionName&&!d&&e.jsxs("div",{children:[e.jsx("br",{}),e.jsxs("div",{className:"mt-5",children:[e.jsx("b",{className:"wdt-100",children:i("Field Map","bit-integrations")}),e.jsx("button",{onClick:()=>F(t,a,m,x),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${i("Refresh Fields","bit-integrations")}'`},type:"button",children:"↻"})]}),e.jsx("br",{}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:i("SuiteDash Fields","bit-integrations")})})]}),t==null?void 0:t.field_map.map((r,n)=>e.jsx(H,{i:n,field:r,suiteDashConf:t,formFields:l,setSuiteDashConf:a,setSnackbar:x},`rp-m-${n+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>k(t.field_map.length,t,a),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:i("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(B,{suiteDashConf:t,setSuiteDashConf:a,formFields:l,loading:c,setLoading:s})]})]})}export{Q as S};
