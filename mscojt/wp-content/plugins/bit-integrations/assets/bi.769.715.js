var q=Object.defineProperty;var A=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var _=(a,n,r)=>n in a?q(a,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[n]=r,v=(a,n)=>{for(var r in n||(n={}))$.call(n,r)&&_(a,r,n[r]);if(A)for(var r of A(n))I.call(n,r)&&_(a,r,n[r]);return a};import{j as e,h as O,L as R}from"./main-390.js";import{_ as s,T as w,o as F,l as f,m as V,n as z,p as P}from"./bi.126.82.js";import{h as M,d as U,a as T,b as k,c as B,e as E}from"./bi.645.716.js";import{r as G,a as H,b as Z}from"./bi.288.714.js";import{T as D}from"./bi.286.689.js";function J({i:a,formFields:n,field:r,sheetConf:i,setSheetConf:d,addressField:b}){const p=r.required,m=b.filter(l=>!l.required);return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:r.formField||"",onChange:l=>M(l,a,i,d),children:[e.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),n.map(l=>l.type!=="file"&&e.jsx("option",{value:l.name,children:l.label},`ff-zhcrm-${l.name}`))]}),e.jsxs("select",{className:"btcd-paper-inp",name:"mailChimpAddressField",value:r.mailChimpAddressField||"",onChange:l=>M(l,a,i,d),disabled:p,children:[e.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),p?Object.values(b).map((l,o)=>e.jsx("option",{value:l.tag,children:l.name},`add-${o*2}`)):Object.values(m).map((l,o)=>e.jsx("option",{value:l.tag,children:l.name},`add-${o*2}`))]}),!p&&e.jsx("button",{onClick:()=>U(a,i,d),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(w,{})})]})}function K({sheetConf:a,setSheetConf:n,formFields:r,address:i}){var b,p,m;const d=(l,o)=>{const u=v({},a);o==="update"&&(l.target.checked?u.actions.update=!0:delete u.actions.update),o==="double_opt_in"&&(l.target.checked?u.actions.double_opt_in=!0:delete u.actions.double_opt_in),o==="address"&&(l.target.checked?(u.actions.address=!0,u.address_field=i.filter(x=>x.required).map(x=>({formField:"",mailChimpAddressField:x.tag,required:!0}))):(delete u.actions.address,u.address_field="")),n(v({},u))};return e.jsxs("div",{className:"pos-rel d-flx w-8",children:[e.jsx(F,{checked:((b=a.actions)==null?void 0:b.address)||!1,onChange:l=>d(l,"address"),className:"wdt-200 mt-4 mr-2",value:"address",title:s("Add Address Field","bit-integrations"),subTitle:s("Add Address Field","bit-integrations")}),e.jsx(F,{checked:((p=a.actions)==null?void 0:p.double_opt_in)||!1,onChange:l=>d(l,"double_opt_in"),className:"wdt-200 mt-4 mr-2",value:"double_opt_in",title:s("Double Opt-in","bit-integrations"),subTitle:s("Add Double Opt-in","bit-integrations")}),e.jsx(F,{checked:((m=a.actions)==null?void 0:m.update)||!1,onChange:l=>d(l,"update"),className:"wdt-200 mt-4 mr-2",value:"user_share",title:s("Update Mail Chimp","bit-integrations"),subTitle:s("Update Responses with MailChimp exist Aduience?","bit-integrations")})]})}function Q({i:a,formFields:n,field:r,sheetConf:i,setSheetConf:d}){var o,u,x,g,h;const b=O(f),{isPro:p}=b,m=((u=(o=i.default)==null?void 0:o.fields)==null?void 0:u[i.listId])&&Object.values(i.default.fields[i.listId]).filter(t=>t.required===!0)||[],l=((g=(x=i.default)==null?void 0:x.fields)==null?void 0:g[i.listId])&&Object.values(i.default.fields[i.listId]).filter(t=>t.required===!1)||[];return e.jsxs("div",{className:"flx mt-2 mb-2 btcbi-field-map",children:[e.jsxs("div",{className:"flx integ-fld-wrp",children:[e.jsxs("select",{className:"btcd-paper-inp mr-2",name:"formField",value:r.formField||"",onChange:t=>T(t,a,i,d),children:[e.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),e.jsx("optgroup",{label:"Form Fields",children:n.map(t=>t.type!=="file"&&e.jsx("option",{value:t.name,children:t.label},`ff-zhcrm-${t.name}`))}),e.jsx("option",{value:"custom",children:s("Custom...","bit-integrations")}),e.jsx("optgroup",{label:`General Smart Codes ${p?"":"(PRO)"}`,children:p&&((h=V)==null?void 0:h.map(t=>e.jsx("option",{value:t.name,children:t.label},`ff-rm-${t.name}`)))})]}),r.formField==="custom"&&e.jsx(D,{onChange:t=>z(t,a,i,d),label:s("Custom Value","bit-integrations"),className:"mr-2",type:"text",value:r.customValue,placeholder:s("Custom Value","bit-integrations"),formFields:n}),e.jsxs("select",{className:"btcd-paper-inp",name:"mailChimpField",value:r.mailChimpField||"",onChange:t=>T(t,a,i,d),disabled:a<m.length,children:[e.jsx("option",{value:"",children:s("Select Field","bit-integrations")}),a<m.length?e.jsx("option",{value:m[a].tag,children:m[a].name},`mchimp-${m[a].tag}`):l.map(({tag:t,name:N})=>e.jsx("option",{value:t,children:N},`mchimp-${t}`))]})]}),e.jsx("button",{onClick:()=>k(a,i,d),className:"icn-btn sh-sm ml-2 mr-1",type:"button",children:"+"}),e.jsx("button",{onClick:()=>B(a,i,d),className:"icn-btn sh-sm ml-1",type:"button","aria-label":"btn",children:e.jsx(w,{})})]})}function ee({formID:a,formFields:n,handleInput:r,sheetConf:i,setSheetConf:d,isLoading:b,setIsLoading:p,setSnackbar:m,a:l}){var x,g,h,t,N,y;const o=[{tag:"addr1",name:"Address 1",required:!0},{tag:"addr2",name:"Address 2",required:!1},{tag:"city",name:"City",required:!0},{tag:"zip",name:"Zip",required:!0},{tag:"state",name:"State",required:!0},{tag:"country",name:"Country",required:!1}],u=c=>{const j=v({},i);c?j.tags=c?c.split(","):[]:delete j.tags,d(v({},j))};return e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("b",{className:"wdt-200 d-in-b",children:s("Audience List:","bit-integrations")}),e.jsxs("select",{onChange:r,name:"listId",value:i.listId,className:"btcd-paper-inp w-5",children:[e.jsx("option",{value:"",children:s("Select Audience List","bit-integrations")}),((x=i==null?void 0:i.default)==null?void 0:x.audiencelist)&&Object.keys(i.default.audiencelist).map(c=>e.jsx("option",{value:i.default.audiencelist[c].listId,children:i.default.audiencelist[c].listName},c))]}),e.jsx("button",{onClick:()=>G(a,i,d,p,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":'"Refresh Audience list"'},type:"button",disabled:b,children:"↻"}),e.jsx("br",{}),e.jsx("br",{}),e.jsxs("div",{className:"d-flx",children:[e.jsx("b",{style:{marginTop:"15px"},className:"wdt-200 d-in-b",children:s("Tags: ","bit-integrations")}),e.jsx(P,{defaultValue:i==null?void 0:i.tags,className:"btcd-paper-drpdwn w-5",options:((g=i==null?void 0:i.default)==null?void 0:g.audienceTags)&&Object.keys(i.default.audienceTags).map(c=>({label:i.default.audienceTags[c].tagName,value:i.default.audienceTags[c].tagName})),onChange:c=>u(c)}),e.jsx("button",{onClick:()=>H(a,i,d,p,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${s("Refresh MailChimp Tags","bit-integrations")}'`},type:"button",disabled:b,children:"↻"})]}),b&&e.jsx(R,{style:{display:"flex",justifyContent:"center",alignItems:"center",height:100,transform:"scale(0.7)"}}),((t=(h=i.default)==null?void 0:h.fields)==null?void 0:t[i.listId])&&!b&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4",children:[e.jsx("b",{className:"wdt-100",children:s("Map Fields","bit-integrations")}),e.jsx("button",{onClick:()=>Z(a,i,d,p,m),className:"icn-btn sh-sm ml-2 mr-2 tooltip",style:{"--tooltip-txt":`'${s("Refresh Fields","bit-integrations")}'`},type:"button",disabled:b,children:"↻"})]}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:s("Form Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:s("Mail Chimp Fields","bit-integrations")})})]}),i.field_map.map((c,j)=>e.jsx(Q,{i:j,field:c,sheetConf:i,formFields:n,setSheetConf:d},`sheet-m-${j+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>k(i.field_map.length,i,d),className:"icn-btn sh-sm",type:"button",children:"+"})}),e.jsx("br",{}),e.jsx("br",{}),((N=i.actions)==null?void 0:N.address)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:s("Address Field Map","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsxs("div",{className:"flx flx-around mt-2 mb-2 btcbi-field-map-label",children:[e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:s("Form Address Fields","bit-integrations")})}),e.jsx("div",{className:"txt-dp",children:e.jsx("b",{children:s("Mail Chimp Address Fields","bit-integrations")})})]}),(y=i==null?void 0:i.address_field)==null?void 0:y.map((c,j)=>e.jsx(J,{i:j,field:c,sheetConf:i,formFields:n,setSheetConf:d,addressField:o},`sheet-m-${j+9}`)),e.jsx("div",{className:"txt-center btcbi-field-map-button mt-2",children:e.jsx("button",{onClick:()=>E(i.address_field.length,i,d),className:"icn-btn sh-sm",type:"button",children:"+"})})]}),e.jsx("br",{}),e.jsx("br",{})]}),i.listId&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-4",children:e.jsx("b",{className:"wdt-100",children:s("Actions","bit-integrations")})}),e.jsx("div",{className:"btcd-hr mt-1"}),e.jsx(K,{sheetConf:i,setSheetConf:d,formFields:n,address:o})]})]})}export{ee as M};
